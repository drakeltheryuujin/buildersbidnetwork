<%= nested_form_for @project do |f| %>
  <div class="row">
    <% if @project.errors.any? %>
      <div class="alert-message block-message error">
        <strong><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</strong>

        <ul>
          <% @project.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="span8 ">
      <div class="field row">
        <%= f.label :name, :class => "span2" %>
        <%= f.text_field :name, :class => "span6 alpha" %>
      </div>
      <div class="field row">
        <%= f.label :project_type, "Type", :class => "span2" %>
        <%= f.collection_select(:project_type_id, ProjectType.all, :id, :name, {:prompt => true}, {:class => "span6 alpha"}) %>
      </div>
      <%= f.fields_for :location do |location_form| %>
        <div class="field row">
          <%= location_form.label :address1, "Location", :class => "span2" %>
          <%= location_form.text_field :address1, :class => "span6 alpha" %>
        </div>
        <div class="field row">
          <span class="span2">&nbsp;</span>
          <%= location_form.text_field :address2, :class => "span6 alpha" %>
        </div>
        <div class="field row">
          <label class="span2">City, State</label>
          <%= location_form.text_field :city, :class => "span4 alpha" %>
          <%= location_form.select(:state, [     
            ['AL', 'AL'], 
            ['AK', 'AK'],
            ['AZ', 'AZ'],
            ['AR', 'AR'], 
            ['CA', 'CA'], 
            ['CO', 'CO'], 
            ['CT', 'CT'], 
            ['DE', 'DE'], 
            ['DC', 'DC'], 
            ['FL', 'FL'],
            ['GA', 'GA'],
            ['HI', 'HI'], 
            ['ID', 'ID'], 
            ['IL', 'IL'], 
            ['IN', 'IN'], 
            ['IA', 'IA'], 
            ['KS', 'KS'], 
            ['KY', 'KY'], 
            ['LA', 'LA'], 
            ['ME', 'ME'], 
            ['MD', 'MD'], 
            ['MA', 'MA'], 
            ['MI', 'MI'], 
            ['MN', 'MN'],
            ['MS', 'MS'], 
            ['MO', 'MO'], 
            ['MT', 'MT'], 
            ['NE', 'NE'], 
            ['NV', 'NV'], 
            ['NH', 'NH'], 
            ['NJ', 'NJ'], 
            ['NM', 'NM'], 
            ['NY', 'NY'], 
            ['NC', 'NC'], 
            ['ND', 'ND'], 
            ['OH', 'OH'], 
            ['OK', 'OK'], 
            ['OR', 'OR'], 
            ['PA', 'PA'], 
            ['RI', 'RI'], 
            ['SC', 'SC'], 
            ['SD', 'SD'], 
            ['TN', 'TN'], 
            ['TX', 'TX'], 
            ['UT', 'UT'], 
            ['VT', 'VT'], 
            ['VA', 'VA'], 
            ['WA', 'WA'], 
            ['WV', 'WV'], 
            ['WI', 'WI'], 
            ['WY', 'WY']], {}, :class => "span2") %>
        </div>
          
        <div class="field row">
          <%= location_form.label :post_code, "Zip", :class => "span2" %>
          <%= location_form.text_field :post_code, :size => "5", :class => "span6 alpha" %>
        </div>
      <% end %>
    </div> <!-- / span8 -->
    <div class="span8">
      <div class="field row datetime-field">
        <%= f.label :bidding_start, "Posted", :class => "span2" %>
        <%= f.datetime_select :bidding_start %>
      </div>
      <div class="field row datetime-field">
        <%= f.label :bidding_end, "Closed", :class => "span2" %>
        <%= f.datetime_select :bidding_end %>
      </div>
      <div class="field row datetime-field">
        <%= f.label :pre_bid_meeting, "Meeting", :class => "span2" %>
        <%= f.datetime_select :pre_bid_meeting %>
      </div>
      <div class="field row datetime-field">
        <%= f.label :project_start, "Start&nbsp;Date".html_safe, :class => "span2" %>
        <%= f.date_select :project_start %>
      </div>
      <div class="field row datetime-field">
        <%= f.label :project_end, "End\&nbsp;Date".html_safe, :class => "span2" %>
        <%= f.date_select :project_end %>
      </div>
    </div>
  </div>
  <div class="row form-stacked">
    <div class="field">
      <%= f.label :description, "Brief Project Description" %><br/>
      <%= f.text_area :description, :class => "span16", :rows => "5" %>
    </div>
    <div class="field">
      <%= f.label :notes, "Additional Notes and Requirements" %><br/>
      <%= f.text_area :notes, :class => "span16", :rows => "5" %>
    </div>
  </div>
  <div class="row ">
    <label class="">Line Items</label>
    <%= f.fields_for :line_items do |line_item_form| %>
      <div class="row">
        <%= line_item_form.text_field :content, :class => "span16" %>
        <p class="span16">
          <%= f.label :units, "Quantity or Number of Units" %>
          <%= line_item_form.text_field :units %>
          <%= line_item_form.link_to_remove "Remove this Line Item" %>
        </p>
      </div> <!-- /row -->
    <% end %>
    <p><%= f.link_to_add "Add a Line Item", :line_items %></p>
  </div>
  <div class="actions row">
    <%= f.submit "Save", :class => 'btn large primary' %>
  </div>
<% end %>
